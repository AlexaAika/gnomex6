<div class="flexbox-column">
    <div style="display:flex; flex:1">
        <div style="margin:1em" >
            <img [src]="this.topicNode?.icon">Topic {{"T"+this.topicNode?.idTopic+" - "}} {{this.topicNode?.name}}
        </div>
        <button mat-button color="primary" (click)="onShareLinkClick()" style="margin:1em" >
            <img [src]="this.constService.GLOBE_LINK"> Share URL
        </button>
        <button mat-button color="primary" (click)="onEmailClick()" style="margin:1em" >
            <img [src]="this.constService.EMAIL_GO_LINK"> Email topic owner
        </button>

    </div>
    <div style="width:100%; flex:8">
        <mat-tab-group class="mat-tab-group-border" >
            <mat-tab  label="Info">
                <form [formGroup]="topicForm" class="flexbox-column">

                    <mat-form-field class="formField" >
                        <input  matInput formControlName="name" type="text" placeholder="name"/>
                        <mat-error *ngIf="topicForm.get('name').hasError('required')">
                            Name is required
                        </mat-error>
                    </mat-form-field>
                    <div style="display:flex;">
                        <mat-form-field class="formField">
                            <input matInput placeholder="Lab" aria-label="State" [matAutocomplete]="autoLab"
                                   formControlName="selectLab" (keyup.enter)="firstLabOpt()"  >
                            <mat-autocomplete [displayWith]="this.prefService.createLabDisplayWithFunction()" #autoLab="matAutocomplete">
                                <mat-option (onSelectionChange)="selectOption($event)" *ngFor="let lab of  filterLabList(topicForm.get('selectLab').value)" [value]="lab">
                                    {{lab[this.prefService.labDisplayField] }}
                                </mat-option>
                            </mat-autocomplete>
                            <mat-error *ngIf="topicForm?.get('selectLab')?.hasError('required')">
                                Lab is required
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field class="formField">
                            <mat-select placeholder="Owner" formControlName="selectOwner">
                                <mat-option>-- None --</mat-option>
                                <mat-option *ngFor="let mem of getLabService.labMembersSubject | async" [value]="mem.idAppUser">
                                    {{ mem[this.prefService.userDisplayField] }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="topicForm?.get('selectOwner')?.hasError('required')"> Owner is required</mat-error>
                        </mat-form-field>

                    </div>


                    <div style="width:100%;">

                        <!-- <label > Description </label>
                         <jqxEditor #editorReference
                                    [(ngModel)]="description"
                                    (onChange)="changed($event)"
                                    [ngModelOptions]="{standalone: true}"
                                    width="100%"
                                    [height]="400"
                                    [editable]="edit"
                                    [tools]="toolBarSettings"
                                    [toolbarPosition]="'bottom'">
                         </jqxEditor> -->
                    </div>
                    <div> Created By:   {{topicNode?.createdBy}} {{topicNode?.createDate}}
                    </div>

                </form>

            </mat-tab>
            <mat-tab label="Visibility">
                <mat-radio-group class="flexbox-column" [disabled]="!edit" [(ngModel)]="visOpt" (change)="radioChange()">
                    <mat-radio-button style="margin: 0.5em"  *ngFor="let rad of visRadio" [value]="rad.value">
                        <img [src]="rad.icon">{{rad.display}}
                    </mat-radio-button>
                </mat-radio-group>

            </mat-tab>
        </mat-tab-group>
    </div>
    <div style="flex:1">
        <save-footer  (saveClicked)="save()" [dirty]="topicForm.dirty" [showSpinner]="showSpinner"
                      [disableSave]="topicForm.invalid || !edit">
        </save-footer>
    </div>

</div>
