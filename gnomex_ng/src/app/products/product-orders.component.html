<div class="flex-container-col full-height padded">
    <div class="flex-container-row justify-space-between padded align-center border flex-two">
        <form class="flex-container-row align-center" [formGroup]="this.filterForm">
            <label class="margin-right reduced-font"><img src="../../assets/basket.png" class="icon">Product Orders</label>
            <div class="filter-col margin-right">
                <mat-form-field class="reduced-font">
                    <mat-select placeholder="Lab" [formControlName]="'lab'">
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let lab of this.filterLabList" [value]="lab.idLab">{{lab.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="reduced-font">
                    <mat-select placeholder="Core Facility" [formControlName]="'coreFacility'">
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let core of this.filterCoreFacilityList" [value]="core.idCoreFacility">{{core.display}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="filter-col margin-right">
                <mat-form-field class="reduced-font">
                    <mat-select placeholder="Status" [formControlName]="'status'">
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let status of this.filterStatusList" [value]="status.codeProductOrderStatus">{{status.productOrderStatus}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field class="reduced-font">
                    <mat-select placeholder="Product Type" [formControlName]="'productType'">
                        <mat-option>None</mat-option>
                        <mat-option *ngFor="let pt of this.filterProductTypeList" [value]="pt.idProductType">{{pt.description}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <date-range-filter (onChange)="this.dateRangeChange($event)"></date-range-filter>
        </form>
        <div>
            <mat-button-toggle-group [(ngModel)]="this.displayMode" class="reduced-font">
                <mat-button-toggle value="{{this.DISPLAY_DETAIL}}">Detail</mat-button-toggle>
                <mat-button-toggle value="{{this.DISPLAY_OVERVIEW}}">Overview</mat-button-toggle>
            </mat-button-toggle-group>
        </div>
    </div>
    <div class="flex-ten padding-top" [hidden]="this.displayMode !== this.DISPLAY_DETAIL">
        Detail Screen Placeholder
    </div>
    <div class="flex-ten padding-top" [hidden]="this.displayMode !== this.DISPLAY_OVERVIEW">
        <ag-grid-angular class="ag-fresh full-height full-width"
                         (gridReady)="this.onGridReady($event)"
                         (gridSizeChanged)="this.onGridSizeChanged($event)"
                         (selectionChanged)="this.onGridSelectionChanged($event)"
                         [rowSelection]="'multiple'"
                         [suppressRowClickSelection]="true"
                         [rowData]="this.productOrderLineItemList">
        </ag-grid-angular>
    </div>
    <div class="flex-container-row flex-one padding-top justify-space-between align-center">
        <div class="align-center">
            <label class="margin-right" [hidden]="this.displayMode !== this.DISPLAY_OVERVIEW">{{this.changeProductOrders.length}} selected</label>
            <mat-form-field class="reduced-font margin-right">
                <mat-select placeholder="Change Status" [(ngModel)]="this.changeStatus">
                    <mat-option>None</mat-option>
                    <mat-option *ngFor="let status of this.filterStatusList" [value]="status.codeProductOrderStatus">{{status.productOrderStatus}}</mat-option>
                </mat-select>
            </mat-form-field>
            <button mat-button class="margin-right" color="primary"
                    [disabled]="!this.changeStatus || !this.changeProductOrders || this.changeProductOrders.length < 1"
                    (click)="this.promptToSave()"><img class="icon" src="../../assets/bullet_go.png">Go</button>
            <button mat-button color="warn" [disabled]="!this.changeProductOrders || this.changeProductOrders.length < 1"
                    (click)="this.promptToDelete()"><img class="icon" src="../../assets/delete.png">Delete</button>
        </div>
        <label [hidden]="this.displayMode !== this.DISPLAY_OVERVIEW">({{this.productOrderLineItemList.length}} line items)</label>
    </div>
</div>
