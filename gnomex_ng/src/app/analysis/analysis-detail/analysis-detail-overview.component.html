<div class="full-width full-height flex-container-col" >
    <div class="flex-container-row align-baseline padded small-font">
        <label class="label-title label-title-width">
            <img class="icon" [src]="analysisTreeNode?.icon">
            Analysis {{analysisTreeNode?.number}}
        </label>
        <button mat-button color="link" *ngIf="showEdit" (click)="editButtonClicked($event)">
            <img *ngIf="!isEditMode" class="icon" [src]="this.constService.ICON_TAG_BLUE_EDIT">
            <img *ngIf="isEditMode" class="icon" [src]="this.constService.PAGE">
            {{isEditMode ? "View" : "Edit"}}
        </button>
        <button mat-button *ngIf="this.showAutoDistributeDataTracks" (click)="this.distributeDataTracks()"><img class="icon" [src]="constService.ICON_DATATRACK_NEW"> Distribute Data Tracks</button>
        <button mat-button *ngIf="this.showManagePEDFile" (click)="this.showManagePEDFileWindow()"><img class="icon" [src]="constService.ICON_CHART_ORGANIZATION">Manage Ped File</button>
        <button mat-button (click)="this.shareWebLink()"><img class="icon" [src]="constService.GLOBE_LINK">Share URL</button>
        <button *ngIf="showLinkToExp"
                mat-button
                color="link"
                (click)="makeLinkToExperiment()">
            <img class="icon" [src]="constService.ICON_LINK">
            Link to Experiment
        </button>
    </div>
    <div class="flex-grow">
        <mat-tab-group class="mat-tab-group-border full-height"  (selectedTabChange)="tabChanged($event)">
            <mat-tab label="Info">
                <analysis-info-tab [isEditMode]="isEditMode"></analysis-info-tab>
            </mat-tab>
            <mat-tab label="Description">
                <analysis-description-tab [isEditMode]="isEditMode"></analysis-description-tab>
            </mat-tab>
            <mat-tab label="Annotations">
                <annotation-tab [annotations]="annotations" [disabled]="!isEditMode" [orderType]="types.ANALYSIS"></annotation-tab>
            </mat-tab>
            <mat-tab  label="Experiment">
               <analysis-experiment-tab [tabVisible]="showExpAnalysisTab"></analysis-experiment-tab>
            </mat-tab>
            <mat-tab label="Related Data" *ngIf="showRelatedDataTab">
                <related-data-tab [relatedObjects]="relatedObjects" ></related-data-tab>
            </mat-tab>
            <mat-tab label="Files">
                <analysis-files-tab></analysis-files-tab>
            </mat-tab>
        </mat-tab-group>
    </div>
    <div>
        <save-footer (saveClicked)="save()" [hidden]="this.routeOutlet !== 'analysisPanel'"
                     [disableSave]="this.analysisService.analysisOverviewForm.invalid || !isEditMode"
                     [dirty]="this.analysisService.analysisOverviewForm.dirty">
        </save-footer>
    </div>
</div>
