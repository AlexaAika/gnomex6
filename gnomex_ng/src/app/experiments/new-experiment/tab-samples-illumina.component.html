<div class="full-height full-width small-font">
    <form [formGroup]="form" class="full-height full-width flex-container-col">
        <div *ngIf="showIlluminaInstructions" class="full-width padded">
            <div class="sample-instructions allow-line-breaks padded">{{ BASIC_INSTRUCTIONS }}
            </div>
        </div>
        <div class="full-width flex-grow flex-container-col">
            <div class="full-width flex-container-row align-center child-margin padded">
                <context-help *ngIf="(_state === this.STATE_NEW || _state === this.STATE_EDIT) && experiment?.isExternal !== 'Y'"
                              name="samplesTabHelp"
                              popupTitle="Samples Tab Instructions" label="Instructions"
                              [codeRequestCategory]="this.requestCategoryType"
                              [idCoreFacility]="this._experiment.idCoreFacility"
                              [isEditMode]="this.createSecurityAdvisor.isAdmin">
                </context-help>
                <div class="flex-container-row child-margin" *ngIf="(_state === this.STATE_NEW || _state === this.STATE_EDIT) && experiment?.isExternal === 'Y'">
                    <button mat-button class="minimize" (click)="onAddSample()">
                        <img class="icon" [src]="this.constService.ICON_ADD" alt="">
                        Add sample
                    </button>
                    <context-help name="addSampleHelp" [isEditMode]="this.createSecurityAdvisor.isAdmin" popupTitle="Add Samples Help">
                    </context-help>
                </div>
                <context-help *ngIf="(_state === this.STATE_NEW || _state === this.STATE_EDIT) && experiment?.isExternal !== 'Y'"
                              name="addSampleHelp"
                              popupTitle="Add Samples Help"
                              label="Adding samples"
                              [isEditMode]="this.createSecurityAdvisor.isAdmin">
                </context-help>
                <button *ngIf="_state === this.STATE_NEW || _state === this.STATE_EDIT" mat-button
                        class="minimize"
                        color="link"
                        matTooltip="Upload Sample Sheet&#13;(tab delimited txt file)"
                        (click)="upload()">
                    <img class="icon" [src]="constService.ICON_UPLOAD" alt="">
                    Upload Sample Sheet
                </button>
                <context-help *ngIf="_state === this.STATE_NEW || _state === this.STATE_EDIT"
                              name="uploadSampleSheetHelp"
                              popupTitle="Upload Sample Sheet Instructions"
                              [isEditMode]="this.createSecurityAdvisor.isAdmin">
                </context-help>
                <input type="file" #fileInput accept=".txt" class="hidden" (change)="onFileSelected($event)" multiple>
                <button mat-button
                        class="minimize"
                        color="link"
                        matTooltip=""
                        (click)="download()">
                    <img class="icon" [src]="constService.ICON_DOWNLOAD">
                    Download Sample Sheet
                </button>
                <mat-checkbox #ccCheckbox
                              *ngIf="this.showCcCheckbox"
                              class="double-left-padded"
                              (change)="toggleCC($event)">
                    Enter CC Numbers
                </mat-checkbox>
            </div>
            <div class="full-width padded-left-right-bottom flex-grow">
                <div #oneEmWidth class="no-height single-em"></div>
                <ag-grid-angular class="ag-theme-fresh full-height full-width"
                                 stopEditingWhenGridLosesFocus="true"
                                 [context]="context"
                                 [animateRows]="true"
                                 [getNodeChildDetails]="nodeChildDetails"
                                 [enableColResize]="true"
                                 [rowSelection]="'single'"
                                 [singleClickEdit]="true"
                                 (cellValueChanged)="onCellValueChanged($event)"
                                 (gridReady)="this.onSamplesGridReady($event)">
                </ag-grid-angular>
            </div>
        </div>
    </form>
</div>
